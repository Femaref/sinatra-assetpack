<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>sinatra-assetpack</title>
    
    <link rel="stylesheet" type="text/css" href="http://documentup.com/stylesheets/screen.css">
    
    
      <style type="text/css">
        a {color: #777799}
      </style>
    

    
      <!-- Google Analytics -->
      <script type="text/javascript">

        var _gaq = _gaq || [];
        _gaq.push(['_setAccount', 'UA-20473929-1']);
        _gaq.push(['_trackPageview']);

        (function() {
          var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
          ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
          var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
        })();

      </script>
    

    <!-- Typekit -->
    
      <script type="text/javascript">
        (function() {
          var config = {
            kitId: 'hjp0pft',
            scriptTimeout: 3000
          };
          var h=document.getElementsByTagName("html")[0];h.className+=" wf-loading";var t=setTimeout(function(){h.className=h.className.replace(/( |^)wf-loading( |$)/g,"");h.className+=" wf-inactive"},config.scriptTimeout);var tk=document.createElement("script");tk.src='//use.typekit.net/'+config.kitId+'.js';tk.type="text/javascript";tk.async="true";tk.onload=tk.onreadystatechange=function(){var a=this.readyState;if(a&&a!="complete"&&a!="loaded")return;clearTimeout(t);try{Typekit.load(config)}catch(b){}};var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(tk,s)
        })();
      </script>
    
  </head>
  <body><div id="container">
  <div id="nav">
    
      <div id="header">
        <a href="#" id="logo">sinatra-assetpack</a>
      </div>
    
    <ul id="sections">
      
        <li>
          <a href="#installation">Installation</a>
          
        </li>
      
        <li>
          <a href="#setup">Setup</a>
          
        </li>
      
        <li>
          <a href="#usage">Usage</a>
          
        </li>
      
        <li>
          <a href="#results">Results</a>
          
        </li>
      
        <li>
          <a href="#features">Features</a>
          
        </li>
      
        <li>
          <a href="#compressors">Compressors</a>
          
            <ul>
              
                <li>
                  <a href="#compressors/yui-compressor">YUI Compressor</a>
                </li>
              
                <li>
                  <a href="#compressors/sass-compression">SASS compression</a>
                </li>
              
                <li>
                  <a href="#compressors/sqwish-css-compression">Sqwish CSS compression</a>
                </li>
              
                <li>
                  <a href="#compressors/google-closure-compression">Google Closure compression</a>
                </li>
              
                <li>
                  <a href="#compressors/uglifyjs-compression">UglifyJS compression</a>
                </li>
              
            </ul>
          
        </li>
      
        <li>
          <a href="#images">Images</a>
          
        </li>
      
        <li>
          <a href="#precompile">Precompile</a>
          
        </li>
      
        <li>
          <a href="#settings">Settings</a>
          
            <ul>
              
                <li>
                  <a href="#settings/assets-serve">assets.serve</a>
                </li>
              
                <li>
                  <a href="#settings/assets-js-_compression-br-assets-css-_compression">assets.js\_compression&lt;br&gt;assets.css\_compression</a>
                </li>
              
                <li>
                  <a href="#settings/assets-js-_compression-_options-br-assets-css-_compression-_options">assets.js\_compression\_options&lt;br&gt;assets.css\_compression\_options</a>
                </li>
              
                <li>
                  <a href="#settings/assets-css-br-assets-js">assets.css&lt;br&gt;assets.js</a>
                </li>
              
                <li>
                  <a href="#settings/assets-ignore">assets.ignore</a>
                </li>
              
                <li>
                  <a href="#settings/assets-prebuild">assets.prebuild</a>
                </li>
              
                <li>
                  <a href="#settings/assets-expires">assets.expires</a>
                </li>
              
            </ul>
          
        </li>
      
        <li>
          <a href="#helpers">Helpers</a>
          
            <ul>
              
                <li>
                  <a href="#helpers/css">&lt;%= css %&gt;</a>
                </li>
              
                <li>
                  <a href="#helpers/js">&lt;%= js %&gt;</a>
                </li>
              
                <li>
                  <a href="#helpers/img">&lt;%= img %&gt;</a>
                </li>
              
            </ul>
          
        </li>
      
        <li>
          <a href="#compass">Compass</a>
          
        </li>
      
        <li>
          <a href="#contributing">Contributing</a>
          
        </li>
      
        <li>
          <a href="#acknowledgements">Acknowledgements</a>
          
        </li>
      
    </ul>
    
    
  </div>
  <div id="content">
    
    <h1><a href="http://ricostacruz.com/sinatra-assetpack">Sinatra AssetPack</a></h1>
<blockquote>
<p> The most convenient way to manage your assets in Sinatra. 

</p>
</blockquote>
<p><a href="https://travis-ci.org/rstacruz/sinatra-assetpack"><img src="https://travis-ci.org/rstacruz/sinatra-assetpack.png?branch=master" alt="Build Status"></a>
<a href="http://badge.fury.io/rb/sinatra-assetpack"><img src="https://badge.fury.io/rb/sinatra-assetpack.png" alt="Gem Version"></a>
<a href="https://gemnasium.com/rstacruz/sinatra-assetpack"><img src="https://gemnasium.com/rstacruz/sinatra-assetpack.png" alt="Dependency Status"></a>
<a href="https://codeclimate.com/github/rstacruz/sinatra-assetpack"><img src="https://codeclimate.com/github/rstacruz/sinatra-assetpack.png" alt="Code Climate"></a>

</p>
<h2 id='installation'>Installation</h2 id='installation'>
<pre><code class="ruby"><span class="comment"># Gemfile</span>
<span class="identifier">gem</span> <span class="string">'sinatra-assetpack'</span>, <span class="symbol">:<span class="identifier"><span class="keymethods">require</span></span></span> => <span class="string">'sinatra/assetpack'</span></code></pre>
<h2 id='setup'>Setup</h2 id='setup'>
<p>Register the extension and set your assets configuration.

</p>
<pre><code class="ruby"><span class="identifier"><span class="keymethods">require</span></span> <span class="string">'sinatra/assetpack'</span>

<span class="class"><span class="keyword">class</span> <span class="title">App</span> <span class="inheritance">&lt; <span class="parent">Sinatra::Base</span></span></span>
  <span class="identifier">set</span> <span class="symbol">:<span class="identifier">root</span></span>, <span class="constant">File</span>.<span class="identifier">dirname</span>(<span class="identifier">__FILE__</span>) <span class="comment"># You must set app root</span>

  <span class="identifier">register</span> <span class="constant">Sinatra::AssetPack</span>

  <span class="identifier">assets</span> {
    <span class="identifier">serve</span> <span class="string">'/js'</span>,     <span class="identifier">from</span><span class="symbol">:</span> <span class="string">'app/js'</span>        <span class="comment"># Default</span>
    <span class="identifier">serve</span> <span class="string">'/css'</span>,    <span class="identifier">from</span><span class="symbol">:</span> <span class="string">'app/css'</span>       <span class="comment"># Default</span>
    <span class="identifier">serve</span> <span class="string">'/images'</span>, <span class="identifier">from</span><span class="symbol">:</span> <span class="string">'app/images'</span>    <span class="comment"># Default</span>

    <span class="comment"># The second parameter defines where the compressed version will be served.</span>
    <span class="comment"># (Note: that parameter is optional, AssetPack will figure it out.)</span>
    <span class="identifier">js</span> <span class="symbol">:<span class="identifier">app</span></span>, <span class="string">'/js/app.js'</span>, [
      <span class="string">'/js/vendor/**/*.js'</span>,
      <span class="string">'/js/lib/**/*.js'</span>
    ]

    <span class="identifier">css</span> <span class="symbol">:<span class="identifier">application</span></span>, <span class="string">'/css/application.css'</span>, [
      <span class="string">'/css/screen.css'</span>
    ]

    <span class="identifier">js_compression</span>  <span class="symbol">:<span class="identifier">jsmin</span></span>    <span class="comment"># :jsmin | :yui | :closure | :uglify</span>
    <span class="identifier">css_compression</span> <span class="symbol">:<span class="identifier">simple</span></span>   <span class="comment"># :simple | :sass | :yui | :sqwish</span>
  }
<span class="identifier"><span class="keyword">end</span></span></code></pre>
<h2 id='usage'>Usage</h2 id='usage'>
<ol>
<li>Drop your assets into <code>/app/css</code>, <code>/app/js</code>, <code>/app/images</code>.</li>
<li>Add <code>register Sinatra::AssetPack</code> (see setup options).</li>
<li>Use <code>&lt;%= js :app %&gt;</code> and <code>&lt;%= css :application %&gt;</code> in your layout.</li>
<li>You now have proper assets management!</li>
</ol>
<h4>Using in layouts</h4>
<p>In your layouts, use the <code>css</code> and <code>js</code> helpers:

</p>
<pre><code class="erb"># <span class="keyword">layout</span>.erb
&lt;<span class="variable">%=</span> css :application, :media => <span class="string">'screen'</span> <span class="variable">%></span>
&lt;<span class="variable">%=</span> js  :app <span class="variable">%></span></code></pre>
<pre><code><span class="preprocessor"># layout.haml</span>
!= css :application, :media => <span class="string">'screen'</span>
!= css :app</code></pre>
<h2 id='results'>Results</h2 id='results'>
<h4>Development mode</h4>
<p>If you&#39;re on <strong>development</strong> mode, it serves each of the files as so:

</p>
<pre><code class="html"><span class="tag">&lt;<span class="title">link</span> <span class="attribute">rel</span>=<span class="value">'stylesheet'</span> <span class="attribute">href</span>=<span class="value">'/css/screen.849289.css'</span> <span class="attribute">media</span>=<span class="value">'screen'</span> <span class="attribute">type</span>=<span class="value">'text/css'</span> /></span>
<span class="tag">&lt;<span class="title">script</span> <span class="attribute">type</span>=<span class="value">'text/javascript'</span> <span class="attribute">src</span>=<span class="value">'/js/vendor/jquery.283479.js'</span>></span><span class="javascript"></span><span class="tag">&lt;/<span class="title">script</span>></span>
<span class="tag">&lt;<span class="title">script</span> <span class="attribute">type</span>=<span class="value">'text/javascript'</span> <span class="attribute">src</span>=<span class="value">'/js/vendor/underscore.589491.js'</span>></span><span class="javascript"></span><span class="tag">&lt;/<span class="title">script</span>></span>
<span class="tag">&lt;<span class="title">script</span> <span class="attribute">type</span>=<span class="value">'text/javascript'</span> <span class="attribute">src</span>=<span class="value">'/js/app/main.589491.js'</span>></span><span class="javascript"></span><span class="tag">&lt;/<span class="title">script</span>></span></code></pre>
<h4>Production mode</h4>
<p>If you&#39;re on <strong>production</strong> mode, it serves a compressed version in the URLs you specify:

</p>
<pre><code class="html"><span class="tag">&lt;<span class="title">link</span> <span class="attribute">rel</span>=<span class="value">'stylesheet'</span> <span class="attribute">href</span>=<span class="value">'/css/application.849289.css'</span> <span class="attribute">media</span>=<span class="value">'screen'</span> <span class="attribute">type</span>=<span class="value">'text/css'</span> /></span>
<span class="tag">&lt;<span class="title">script</span> <span class="attribute">type</span>=<span class="value">'text/javascript'</span> <span class="attribute">src</span>=<span class="value">'/js/app.589491.js'</span>></span><span class="javascript"></span><span class="tag">&lt;/<span class="title">script</span>></span></code></pre>
<h2 id='features'>Features</h2 id='features'>
<ul>
<li><p><strong>CoffeeScript support</strong> Just add your coffee files in one of the paths 
served (in the example, <code>app/js/hello.coffee</code>) and they will be available as JS 
files (<code>http://localhost:4567/js/hello.js</code>).</p>
</li>
<li><p><strong>Sass/Less/SCSS support</strong> Works the same way. Place your dynamic CSS files 
in there (say, <code>app/css/screen.sass</code>) and they will be available as CSS files 
(<code>http://localhost:4567/css/screen.css</code>).</p>
</li>
<li><p><strong>Cache busting</strong> the <code>css</code> and <code>js</code> helpers automatically ensures the URL 
is based on when the file was last modified. The URL <code>/js/jquery.js</code> may be 
translated to <code>/js/jquery.8237898.js</code> to ensure visitors always get the latest 
version.</p>
</li>
<li><p><strong>Images support</strong> Image filenames in your CSS will automatically get a 
cache-busting suffix (eg, <code>/images/icon.742958.png</code>).</p>
</li>
<li><p><strong>Embedded images support</strong> You can embed images in your CSS files as 
<code>data:</code> URIs by simply adding <code>?embed</code> to the end of your URL.</p>
</li>
<li><p><strong>No intermediate files needed</strong> You don&#39;t need to generate compiled files.
You can, but it&#39;s optional. Keeps your source repo clean!</p>
</li>
<li><p><strong>Auto minification (with caching)</strong> JS and CSS files will be compressed as 
needed.</p>
</li>
<li><p><strong>Heroku support</strong> Oh yes. That&#39;s right.</p>
</li>
</ul>
<h2 id='compressors'>Compressors</h2 id='compressors'>
<p>By default, AssetPack uses <a href="http://rubygems.org/gems/jsmin">JSMin</a> for JS 
compression, and simple regexes for CSS compression. You can specify other
compressors in the <code>assets</code> block:

</p>
<pre><code class="ruby"><span class="identifier">assets</span> {
  <span class="identifier">js_compression</span>  <span class="symbol">:<span class="identifier">jsmin</span></span>    <span class="comment"># :jsmin | :yui | :closure | :uglify</span>
  <span class="identifier">css_compression</span> <span class="symbol">:<span class="identifier">simple</span></span>   <span class="comment"># :simple | :sass | :yui | :sqwish</span>
}</code></pre>
<h3 id='compressors/yui-compressor'>YUI Compressor</h3 id='compressors/yui-compressor'>
<p>This uses Yahoo&#39;s Java-powered YUI compressor.

</p>
<pre><code class="ruby"><span class="identifier">assets</span> {
  <span class="identifier">js_compression</span>  <span class="symbol">:<span class="identifier">yui</span></span>
  <span class="identifier">js_compression</span>  <span class="symbol">:<span class="identifier">yui</span></span>, <span class="symbol">:<span class="identifier">munge</span></span> => <span class="identifier"><span class="keyword">true</span></span>   <span class="comment"># Munge variable names</span>

  <span class="identifier">css_compression</span> <span class="symbol">:<span class="identifier">yui</span></span>
}</code></pre>
<p><strong>Note:</strong> This depends on the <code>yui-compressor</code> gem :

</p>
<pre><code class="ruby"><span class="comment"># Gemfile</span>
<span class="identifier">gem</span> <span class="string">'yui-compressor'</span>, <span class="symbol">:<span class="identifier"><span class="keymethods">require</span></span></span> => <span class="string">'yui/compressor'</span></code></pre>
<h3 id='compressors/sass-compression'>SASS compression</h3 id='compressors/sass-compression'>
<p>This treats the CSS files as Scss files and uses Sass&#39;s <code>:output =&gt; :compressed</code>.

</p>
<pre><code class="ruby"><span class="identifier">assets</span> {
  <span class="identifier">css_compression</span> <span class="symbol">:<span class="identifier">sass</span></span>
}</code></pre>
<p><strong>Note:</strong> This depends on the <code>sass</code> gem :

</p>
<pre><code class="ruby"><span class="comment"># Gemfile</span>
<span class="identifier">gem</span> <span class="string">'sass'</span></code></pre>
<h3 id='compressors/sqwish-css-compression'>Sqwish CSS compression</h3 id='compressors/sqwish-css-compression'>
<p><a href="http://github.com/ded/sqwish">Sqwish</a> is a NodeJS-based CSS compressor.  To use 
Sqwish with AssetPack, install it using <code>npm install -g sqwish</code>. You need NodeJS 
and NPM installed.

</p>
<pre><code class="ruby"><span class="identifier">assets</span> {
  <span class="identifier">css_compression</span> <span class="symbol">:<span class="identifier">sqwish</span></span>
  <span class="identifier">css_compression</span> <span class="symbol">:<span class="identifier">sqwish</span></span>, <span class="symbol">:<span class="identifier">strict</span></span> => <span class="identifier"><span class="keyword">true</span></span>
}</code></pre>
<h3 id='compressors/google-closure-compression'>Google Closure compression</h3 id='compressors/google-closure-compression'>
<p>This uses the <a href="http://closure-compiler.appspot.com/home">Google closure compiler 
service</a>
to compress your JavaScript. Available levels are:

</p>
<ul>
<li><code>WHITESPACE_ONLY</code></li>
<li><code>SIMPLE_OPTIMIZATIONS</code></li>
<li><code>ADVANCED_OPTIMIZATIONS</code></li>
</ul>
<pre><code class="ruby"><span class="identifier">assets</span> {
  <span class="identifier">js_compression</span> <span class="symbol">:<span class="identifier">closure</span></span>
  <span class="identifier">js_compression</span> <span class="symbol">:<span class="identifier">closure</span></span>, <span class="symbol">:<span class="identifier">level</span></span> => <span class="string">"SIMPLE_OPTIMIZATIONS"</span>
}</code></pre>
<h3 id='compressors/uglifyjs-compression'>UglifyJS compression</h3 id='compressors/uglifyjs-compression'>
<p>This uses the <a href="https://github.com/mishoo/UglifyJS">UglifyJS</a> compressor to 
compress your JavaScript. You will need to install the 
<a href="http://rubygems.org/gems/uglifier">uglifier</a> gem.

</p>
<p>For options, refer to the <a href="https://github.com/lautis/uglifier">Uglifier 
documentation</a>.

</p>
<pre><code class="ruby"><span class="identifier">assets</span> {
  <span class="identifier">js_compression</span> <span class="symbol">:<span class="identifier">uglify</span></span>
  <span class="identifier">js_compression</span> <span class="symbol">:<span class="identifier">uglify</span></span>, [<span class="identifier">options</span>]
}</code></pre>
<p><strong>Note:</strong> This depends on the <code>uglifier</code> gem :

</p>
<pre><code class="ruby"><span class="comment"># Gemfile</span>
<span class="identifier">gem</span> <span class="string">'uglifier'</span></code></pre>
<h2 id='images'>Images</h2 id='images'>
<p>To show images, use the <code>img</code> helper.
This automatically adds width, height, and a cache buster thingie.
ImageMagick is required to generate full image tags with width and height.

</p>
<pre><code class="html"><span class="comment">&lt;!-- Original: --></span> <span class="vbscript">&lt;%= img <span class="comment">'/images/email.png' %></span></span>
<span class="comment">&lt;!-- Output:   --></span> <span class="tag">&lt;<span class="title">img</span> <span class="attribute">src</span>=<span class="value">'/images/email.873842.png'</span> <span class="attribute">width</span>=<span class="value">'16'</span> <span class="attribute">height</span>=<span class="value">'16'</span> /></span></code></pre>
<h4>URL translation</h4>
<p>In your CSS files, <code>url()</code>&#39;s will automatically be translated.

</p>
<pre><code class="css"><span class="comment">/* Original: */</span>    <span class="class">.email</span> <span class="rules">{ <span class="rule"><span class="attribute">background</span>:<span class="value"> <span class="function">url(/images/email.png)</span></span>;</span> <span class="rule">}</span></span>
<span class="comment">/* Output:   */</span>    <span class="class">.email</span> <span class="rules">{ <span class="rule"><span class="attribute">background</span>:<span class="value"> <span class="function">url(/images/email.<span class="number">6783478</span>.png)</span></span>;</span> <span class="rule">}</span></span></code></pre>
<h4>Image embedding</h4>
<p>Want to embed images as <code>data:</code> URI&#39;s? Sure! Just add <code>?embed</code> at the end of the 
URL.

</p>
<pre><code class="css"><span class="comment">/* Original: */</span>    <span class="class">.email</span> <span class="rules">{ <span class="rule"><span class="attribute">background</span>:<span class="value"> <span class="function">url(/images/email.png?embed)</span></span>;</span> <span class="rule">}</span></span>
<span class="comment">/* Output:   */</span>    <span class="class">.email</span> <span class="rules">{ <span class="rule"><span class="attribute">background</span>:<span class="value"> <span class="function">url(data:image/png;base64,NF8dG3I...)</span></span>;</span> <span class="rule">}</span></span></code></pre>
<h2 id='precompile'>Precompile</h2 id='precompile'>
<pre><code class="ruby"><span class="comment"># Rakefile</span>
<span class="constant">APP_FILE</span>  = <span class="string">'app.rb'</span>
<span class="constant">APP_CLASS</span> = <span class="string">'App'</span>

<span class="identifier"><span class="keymethods">require</span></span> <span class="string">'sinatra/assetpack/rake'</span></code></pre>
<h4>Invoking</h4>
<p>Now invoke the <code>assetpack:build</code> Rake task. This will create files in <code>/public</code>.

</p>
<pre><code><span class="char">$ </span>rake <span class="method">assetpack:</span>build</code></pre>
<h2 id='settings'>Settings</h2 id='settings'>
<h4>Assets block</h4>
<p>All configuration happens in the <code>assets</code> block. You may invoke it in 2 ways:

</p>
<pre><code class="ruby"><span class="class"><span class="keyword">class</span> <span class="title">App</span> <span class="inheritance">&lt; <span class="parent">Sinatra::Base</span></span></span>
  <span class="identifier">register</span> <span class="constant">Sinatra::AssetPack</span>

  <span class="comment"># Style 1</span>
  <span class="identifier">assets</span> <span class="identifier"><span class="keyword">do</span></span>
    <span class="identifier">css</span> <span class="symbol">:<span class="identifier">hello</span></span>, [ <span class="string">'/css/*.css'</span> ]
    <span class="identifier">js_compression</span> <span class="symbol">:<span class="identifier">yui</span></span>
  <span class="identifier"><span class="keyword">end</span></span>

  <span class="comment"># Style 2</span>
  <span class="identifier">assets</span> <span class="identifier"><span class="keyword">do</span></span> |<span class="identifier">a</span>|
    <span class="identifier">a</span>.<span class="identifier">css</span> <span class="symbol">:<span class="identifier">hello</span></span>, [<span class="string">'/css/*.css'</span> ]
    <span class="identifier">a</span>.<span class="identifier">js_compression</span> <span class="symbol">:<span class="identifier">yui</span></span>
  <span class="identifier"><span class="keyword">end</span></span>
<span class="identifier"><span class="keyword">end</span></span></code></pre>
<h4>Getting options</h4>
<p>Invoking it without a block allows you to access the options. This works for 
almost all the options, with the exception for <code>css</code>, <code>js</code> and <code>serve</code>.

</p>
<pre><code class="ruby"><span class="constant">App</span>.<span class="identifier">assets</span>
<span class="constant">App</span>.<span class="identifier">assets</span>.<span class="identifier">js_compression</span>   <span class="comment">#=> :yui</span></code></pre>
<h3 id='settings/assets-serve'>assets.serve</h3 id='settings/assets-serve'>
<p>Serves files from <code>LOCALPATH</code> in the URI path <code>PATH</code>. Both parameters are 
required.

</p>
<pre><code class="ruby"><span class="comment"># Usage</span>
<span class="identifier">serve</span> <span class="string">'PATH'</span>, <span class="symbol">:<span class="identifier">from</span></span> => <span class="string">'LOCALPATH'</span></code></pre>
<h4>Example</h4>
<p>This makes <code>/app/javascripts/vendor/jquery.js</code>
available as <code>http://localhost:4567/js/vendor/jquery.js</code>.

</p>
<pre><code class="ruby"><span class="identifier">serve</span> <span class="string">'/js'</span>, <span class="identifier">from</span><span class="symbol">:</span> <span class="string">'/app/javascripts'</span></code></pre>
<h3 id='settings/assets-js-_compression-br-assets-css-_compression'>assets.js_compression<br>assets.css_compression</h3 id='settings/assets-js-_compression-br-assets-css-_compression'>
<p>Sets the compression engine to use for JavaScript or CSS. This defaults to 
<code>:jsmin</code> and <code>:simple</code>, respectively.

</p>
<p>If <code>OPTIONS_HASH</code> is given as a hash, it sets options for the engine to use.

</p>
<pre><code class="ruby"><span class="comment"># Usage:</span>
<span class="identifier">assets</span> {
  <span class="identifier">js_compression</span> <span class="symbol">:<span class="identifier">ENGINE</span></span>
  <span class="identifier">js_compression</span> <span class="symbol">:<span class="identifier">ENGINE</span></span>, <span class="constant">OPTIONS_HASH</span>
  <span class="identifier">css_compression</span> <span class="symbol">:<span class="identifier">ENGINE</span></span>
  <span class="identifier">css_compression</span> <span class="symbol">:<span class="identifier">ENGINE</span></span>, <span class="constant">OPTIONS_HASH</span>
}</code></pre>
<h4>Examples</h4>
<p>Yo seriously check this out: the first line uses Sqwish with it&#39;s defaults, and 
the second line uses Sqwish with it&#39;s magic.

</p>
<pre><code class="ruby"><span class="identifier">assets</span> {
  <span class="identifier">css_compression</span> <span class="symbol">:<span class="identifier">sqwish</span></span>
  <span class="identifier">css_compression</span> <span class="symbol">:<span class="identifier">sqwish</span></span>, <span class="symbol">:<span class="identifier">strict</span></span> => <span class="identifier"><span class="keyword">true</span></span>
}</code></pre>
<h3 id='settings/assets-js-_compression-_options-br-assets-css-_compression-_options'>assets.js_compression_options<br>assets.css_compression_options</h3 id='settings/assets-js-_compression-_options-br-assets-css-_compression-_options'>
<p>Sets the options for the compression engine to use. This is usually not needed 
as you can already set options using <code>js_compression</code> and <code>css_compression</code>.

</p>
<pre><code class="ruby"><span class="comment"># Usage:</span>
<span class="identifier">assets</span> {
  <span class="identifier">js_compression_options</span> <span class="constant">HASH</span>
  <span class="identifier">css_compression_options</span> <span class="constant">HASH</span>
}</code></pre>
<h4>Example</h4>
<p>This sets the option for <code>:munge</code> for the CSS compression engine.

</p>
<pre><code class="ruby"><span class="identifier">css_compression_options</span> <span class="symbol">:<span class="identifier">munge</span></span> => <span class="identifier"><span class="keyword">true</span></span></code></pre>
<h3 id='settings/assets-css-br-assets-js'>assets.css<br>assets.js</h3 id='settings/assets-css-br-assets-js'>
<p>Adds packages to be used.

</p>
<p>The <code>NAME</code> is a symbol defines the ID for that given package that you can use 
for the helpers. That is, If a CSS package was defined as <code>css :main, [ ... ]</code>, 
then you will need to use <code>&lt;%= css :main %&gt;</code> to render it in views.

</p>
<p>the <code>URI</code> is a string that defines where the compressed version will be served.
It is optional. If not provided, it will default to <code>&quot;/assets/name.type&quot;</code> (eg:
<code>/assets/main.css</code>).

</p>
<p>the <code>PATHs</code> is an array that defines files that will be served. Take note that 
this is an array of URI paths, not local paths.

</p>
<p>If a <code>PATH</code> contains wildcards, it will be expanded in alphabetical order.
Redundancies will be taken care of.

</p>
<pre><code class="ruby"><span class="comment"># Usage:</span>
<span class="identifier">assets</span> {
  <span class="identifier">css</span> <span class="symbol">:<span class="identifier">NAME</span></span>, [ <span class="constant">PATH1</span>, <span class="constant">PATH2</span>, ... ]
  <span class="identifier">css</span> <span class="symbol">:<span class="identifier">NAME</span></span>, <span class="string">'URI'</span>, [ <span class="constant">PATH1</span>, <span class="constant">PATH2</span>, ... ]
  <span class="identifier">js</span><span class="symbol">:<span class="identifier">NAME</span></span>, [ <span class="constant">PATH1</span>, <span class="constant">PATH2</span>, ... ]
  <span class="identifier">js</span><span class="symbol">:<span class="identifier">NAME</span></span>, <span class="string">'URI'</span>, [ <span class="constant">PATH1</span>, <span class="constant">PATH2</span>, ... ]
}</code></pre>
<h4>Example</h4>
<p>In this example, JavaScript files will be served compressed as 
<code>/js/application.js</code> (default since no <code>URI</code> is given). The files will be taken 
from <code>./app/javascripts/vendor/jquery*.js</code>.

</p>
<pre><code class="ruby"><span class="class"><span class="keyword">class</span> <span class="title">App</span> <span class="inheritance">&lt; <span class="parent">Sinatra::Base</span></span></span>
  <span class="identifier">assets</span> {
    <span class="identifier">serve</span> <span class="string">'/js'</span>, <span class="identifier">from</span><span class="symbol">:</span> <span class="string">'/app/javascripts'</span>
    <span class="identifier">js</span> <span class="symbol">:<span class="identifier">application</span></span>, [
      <span class="string">'/js/vendor/jquery.*.js'</span>,
      <span class="string">'/js/vendor/jquery.js'</span>
    ]
  }
<span class="identifier"><span class="keyword">end</span></span>

<span class="comment"># In views: &lt;%= js :application %></span></code></pre>
<h3 id='settings/assets-ignore'>assets.ignore</h3 id='settings/assets-ignore'>
<p>Excludes any URL paths that match the given spec.

</p>
<p>These files will not show up in packages, and they will not be accessible.

</p>
<p>By default, <code>.*</code> and <code>_*</code> are ignored. The former protects folders such as 
<code>.svn</code> from being accessed, and the latter protects Sass partial files from 
being accessed directly.

</p>
<p>Note that this matches against URL paths, not local file paths. This means 
something like <code>*.scss</code> will not work, as all stylesheet files will be compiled 
to <code>.css</code>.

</p>
<pre><code class="ruby"><span class="comment"># Usage:</span>
<span class="identifier">assets</span> {
  <span class="identifier">ignore</span> <span class="constant">FILESPEC</span>
}</code></pre>
<h4>Example</h4>
<p>Here&#39;s an example.

</p>
<pre><code class="ruby"><span class="class"><span class="keyword">class</span> <span class="title">App</span> <span class="inheritance">&lt; <span class="parent">Sinatra::Base</span></span></span>
  <span class="identifier">assets</span> {
    <span class="comment"># Ignores all files matching *.private.js in any folder.</span>
    <span class="identifier">ignore</span> <span class="string">'*.private.js'</span>

    <span class="comment"># Ignores all files in `/app/js/foo/**/*`</span>
    <span class="identifier">ignore</span> <span class="string">'/js/foo'</span>
  }
<span class="identifier"><span class="keyword">end</span></span></code></pre>
<h4>Advanced usage</h4>
<p>By default, <code>.*</code> and <code>_*</code> are ignored. To disable this behavior, you can use 
<code>clear_ignores!</code> before your <code>ignore</code> lines.

</p>
<pre><code class="ruby"><span class="identifier">assets</span> {
  <span class="identifier">clear_ignores!</span>
  <span class="identifier">ignore</span> <span class="string">'*.private.js'</span>
}</code></pre>
<p>To check if a certain file is ignored, use <code>assets.ignore?</code>

</p>
<pre><code class="ruby"><span class="identifier">assets</span>.<span class="identifier">ignored?</span>(<span class="string">"/css/_chrome.css"</span>)   <span class="comment">#=> true</span></code></pre>
<h3 id='settings/assets-prebuild'>assets.prebuild</h3 id='settings/assets-prebuild'>
<p>Caches the built packages on application startup.

</p>
<p>If this is not used, the packages will be minified when they are first 
requested. This only has an effect in the production environment (or when
Sinatra&#39;s <code>reload_templates</code> is otherwise set to false).

</p>
<pre><code class="ruby"><span class="comment"># Usage:</span>
<span class="identifier">prebuild</span> {<span class="identifier"><span class="keyword">true</span></span>|<span class="identifier"><span class="keyword">false</span></span>}</code></pre>
<h4>Example</h4>
<p>In this example, the package for <code>:application</code> will be built when the 
application is started in the production environment.

</p>
<pre><code class="ruby"><span class="class"><span class="keyword">class</span> <span class="title">App</span> <span class="inheritance">&lt; <span class="parent">Sinatra::Base</span></span></span>
  <span class="identifier">assets</span> {
    <span class="identifier">js_compression</span> <span class="symbol">:<span class="identifier">closure</span></span>

    <span class="identifier">js</span> <span class="symbol">:<span class="identifier">application</span></span>, [
      <span class="string">'/js/vendor/jquery.*.js'</span>,
      <span class="string">'/js/vendor/jquery.js'</span>
    ]
    <span class="identifier">prebuild</span> <span class="identifier"><span class="keyword">true</span></span>
  }
<span class="identifier"><span class="keyword">end</span></span>

<span class="comment"># $ RACK_ENV=production ruby app.rb</span>
<span class="comment"># ** Building /assets/application.js...</span>
<span class="comment"># == Sinatra/1.2.6 has taken the stage on 4567 for production</span>
<span class="comment"># >> Thin web server (v1.2.11 codename Bat-Shit Crazy)</span>
<span class="comment"># >> Maximum connections set to 1024</span>
<span class="comment"># >> Listening on 0.0.0.0:4567, CTRL+C to stop</span></code></pre>
<h3 id='settings/assets-expires'>assets.expires</h3 id='settings/assets-expires'>
<p>Sets cache control headers for all assets handled by AssetPack. Defaults to <code>expires 86400*30, :public</code>. Passes the arguments to <a href="http://rubydoc.info/gems/sinatra/Sinatra/Helpers#expires-instance_method">Sinatras #expires</a>.

</p>
<pre><code class="ruby"><span class="comment"># Usage:</span>
<span class="identifier">expires</span> <span class="identifier">amount</span>, *<span class="identifier"><span class="keymethods">values</span></span></code></pre>
<h4>Example</h4>
<p>In this example all assets get cached for a year.

</p>
<pre><code class="ruby"><span class="class"><span class="keyword">class</span> <span class="title">App</span> <span class="inheritance">&lt; <span class="parent">Sinatra::Base</span></span></span>
  <span class="identifier">assets</span> {
    <span class="identifier">js_compression</span> <span class="symbol">:<span class="identifier">closure</span></span>

    <span class="identifier">js</span> <span class="symbol">:<span class="identifier">application</span></span>, [
      <span class="string">'/js/vendor/jquery.*.js'</span>,
      <span class="string">'/js/vendor/jquery.js'</span>
    ]
    <span class="identifier">expires</span> <span class="number">86400</span>*<span class="number">365</span>, <span class="symbol">:<span class="identifier">public</span></span>
  }
<span class="identifier"><span class="keyword">end</span></span></code></pre>
<h2 id='helpers'>Helpers</h2 id='helpers'>
<p>These are helpers you can use in your views.

</p>
<h3 id='helpers/css'>&lt;%= css %&gt;</h3 id='helpers/css'>
<p>Shows a CSS package named <code>PACKAGE</code>. If <code>OPTIONS_HASH</code> is given, they will we 
passed onto the <code>&lt;link&gt;</code> tag to be generated as attributes.

</p>
<p>You may specify as many packages as you need, as shown in the second usage line.

</p>
<pre><code class="ruby"><span class="comment"># Usage:</span>
&lt;%= <span class="identifier">css</span> <span class="symbol">:<span class="identifier">PACKAGE</span></span> %>
&lt;%= <span class="identifier">css</span> <span class="symbol">:<span class="identifier">PACKAGE_1</span></span>, <span class="symbol">:<span class="identifier">PACKAGE_2</span></span>, ...  <span class="symbol">:<span class="identifier">PACKAGE_N</span></span>, <span class="constant">OPTIONS_HASH</span> %>
&lt;%= <span class="identifier">css</span> <span class="symbol">:<span class="identifier">PACKAGE</span></span>, <span class="constant">OPTIONS_HASH</span> %></code></pre>
<h4>Example 1</h4>
<p>This links to the <code>main</code> stylesheet for <em>screen</em> media.

</p>
<pre><code class="erb"><span class="vbscript">&lt;%= css :main, media: <span class="comment">'screen' %></span></span>

<span class="comment">&lt;!-- Output: --></span>
<span class="tag">&lt;<span class="title">link</span> <span class="attribute">rel</span>=<span class="value">'stylesheet'</span> <span class="attribute">type</span>=<span class="value">'text/css'</span> <span class="attribute">href</span>=<span class="value">'/css/main.873984.css'</span> <span class="attribute">media</span>=<span class="value">'screen'</span> /></span></code></pre>
<h4>Example 2</h4>
<p>You may also invoke it with multiple packages.

</p>
<pre><code class="erb"><span class="vbscript">&lt;%= css :base, :app, :main, media: <span class="comment">'screen' %></span></span>

<span class="comment">&lt;!-- Output: --></span>
<span class="tag">&lt;<span class="title">link</span> <span class="attribute">rel</span>=<span class="value">'stylesheet'</span> <span class="attribute">type</span>=<span class="value">'text/css'</span> <span class="attribute">href</span>=<span class="value">'/css/base.873984.css'</span> <span class="attribute">media</span>=<span class="value">'screen'</span> /></span>
<span class="tag">&lt;<span class="title">link</span> <span class="attribute">rel</span>=<span class="value">'stylesheet'</span> <span class="attribute">type</span>=<span class="value">'text/css'</span> <span class="attribute">href</span>=<span class="value">'/css/app.873984.css'</span> <span class="attribute">media</span>=<span class="value">'screen'</span> /></span>
<span class="tag">&lt;<span class="title">link</span> <span class="attribute">rel</span>=<span class="value">'stylesheet'</span> <span class="attribute">type</span>=<span class="value">'text/css'</span> <span class="attribute">href</span>=<span class="value">'/css/main.873984.css'</span> <span class="attribute">media</span>=<span class="value">'screen'</span> /></span></code></pre>
<h3 id='helpers/js'>&lt;%= js %&gt;</h3 id='helpers/js'>
<p>Same as <code>css</code>, but obviously for JavaScript. You may also specify as many packages as you need, just with <code>css</code>.

</p>
<pre><code class="erb"><span class="comment"># Usage:</span>
&lt;%= js :PACKAGE %>
&lt;%= js :PACKAGE_1, :PACKAGE_2, <span class="keyword">...</span>  :PACKAGE_N, OPTIONS_HASH %>
&lt;%= js :PACKAGE, OPTIONS_HASH %></code></pre>
<h4>Example</h4>
<p>This example embeds the <em>main</em> package with an ID.

</p>
<pre><code class="erb"><span class="vbscript">&lt;%= js :main, id: <span class="comment">'main_script' %></span></span>

<span class="comment">&lt;!-- Output: --></span>
<span class="tag">&lt;<span class="title">script</span> <span class="attribute">type</span>=<span class="value">'text/javascript'</span> <span class="attribute">src</span>=<span class="value">'/js/main.783439.js'</span> <span class="attribute">id</span>=<span class="value">'main_script'</span>></span><span class="javascript"></span><span class="tag">&lt;/<span class="title">script</span>></span></code></pre>
<h3 id='helpers/img'>&lt;%= img %&gt;</h3 id='helpers/img'>
<p>Shows an <code>&lt;img&gt;</code> tag from the given <code>SRC</code>. If the images is found in the asset 
directories (and ImageMagick is available), <code>width</code> and <code>height</code> attributes will 
be added.

</p>
<pre><code class="ruby"><span class="comment"># Usage:</span>
<span class="identifier">img</span> <span class="string">'SRC'</span>
<span class="identifier">img</span> <span class="string">'SRC'</span>, <span class="constant">OPTIONS_HASH</span></code></pre>
<p>If <code>OPTIONS_HASH</code> is given, they will we passed onto the <code>&lt;img&gt;</code> tag to be 
generated as attributes.

</p>
<h4>Example</h4>
<p>This example renders an image with an alt tag.

</p>
<pre><code class="erb"><span class="vbscript">&lt;%= img <span class="comment">'/images/icon.png', alt: 'Icon' %></span></span>

<span class="comment">&lt;!-- Output: --></span>
<span class="tag">&lt;<span class="title">img</span> <span class="attribute">src</span>=<span class="value">'/images/icon.834782.png'</span> <span class="attribute">width</span>=<span class="value">'24'</span> <span class="attribute">height</span>=<span class="value">'24'</span> <span class="attribute">alt</span>=<span class="value">'Icon'</span> /></span>`</code></pre>
<h2 id='compass'>Compass</h2 id='compass'>
<p>AssetPack doesn&#39;t have built-in <a href="http://compass-style.org">Compass</a>
support, but you can include it easily with
<a href="https://github.com/sinefunc/sinatra-support/">Sinatra Support</a>.

</p>
<p>See also the <a href="https://github.com/rstacruz/sinatra-assetpack/tree/master/examples/compass">Compass example application.</a>

</p>
<h2 id='contributing'>Contributing</h2 id='contributing'>
<p>See <a href="https://github.com/rstacruz/sinatra-assetpack/blob/master/CONTRIBUTING.md">CONTRIBUTING.md</a> for details on contributing and running test.

</p>
<h2 id='acknowledgements'>Acknowledgements</h2 id='acknowledgements'>
<p>© 2011-2013, Rico Sta. Cruz. Released under the <a href="http://www.opensource.org/licenses/mit-license.php">MIT
License</a>.

</p>
<p>Sinatra-AssetPack is authored by <a href="http://ricostacruz.com">Rico Sta. Cruz</a> with help
from it&#39;s <a href="http://github.com/rstacruz/sinatra-assetpack/contributors">contributors</a>. It is sponsored by <a href="http://sinefunc.com">Sinefunc, Inc</a>.

</p>
<p>Sinatra-AssetPack is maintained by <a href="http://github.com/j15e">Jean-Philipe Doyle</a> at <a href="http://github.com/hooktstudios">Hookt Studios</a>.

</p>
<p>Github : <a href="http://github.com/rstacruz">@rstacruz</a>, <a href="http://github.com/j15e">@j15e</a>

</p>
<p>Twitter : <a href="http://twitter.com/rstacruz">@rstacruz</a>, <a href="http://twitter.com/j15e">@j15e</a>

</p>

  </div>
</div></body>
</html>